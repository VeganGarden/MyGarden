# CHANGELOG - v4.0

## [4.0.0] - 2025-10-15

### ğŸš€ é‡å¤§å‡çº§: æ°”å€™é¤å…ç‰ˆ

ä»"ç”Ÿæ€é—­ç¯"å‡çº§ä¸º"ç¤¾ä¼šåŒ–å‡ç¢³è¡ŒåŠ¨å¹³å°"

---

## Added (æ–°å¢)

### æ•°æ®åº“

**æ–°å¢ 15 ä¸ªé›†åˆ (+50%)**:

**é¤å…åŸŸ** (8 ä¸ª):

- `restaurants` - æ°”å€™é¤å…ä¸»è¡¨
- `restaurant_menus` - é¤å…èœå•ç®¡ç†
- `restaurant_menu_items` - ä½ç¢³èœå“æ˜ç»†
- `restaurant_orders` - é¤å…è®¢å• (å ‚é£Ÿ+å¤–å–)
- `restaurant_reservations` - é¤å…é¢„è®¢ç³»ç»Ÿ
- `restaurant_members` - é¤å…ä¼šå‘˜ä½“ç³»
- `restaurant_campaigns` - é¤å…è¥é”€æ´»åŠ¨
- `restaurant_reviews` - é¤å…è¯„ä»·ç³»ç»Ÿ

**ç¢³æ™®æƒ åŸŸ** (4 ä¸ª):

- `carbon_credits` - ç»Ÿä¸€ç¢³ç§¯åˆ†è´¦æˆ·
- `carbon_transactions` - ç¢³ç§¯åˆ†äº¤æ˜“æµæ°´
- `carbon_exchange_records` - ç¢³äº¤æ˜“æ‰€å¯¹æ¥
- `carbon_milestones` - ç¢³å‡æ’é‡Œç¨‹ç¢‘

**æ”¿åºœåˆä½œåŸŸ** (3 ä¸ª):

- `government_programs` - æ”¿åºœæ¿€åŠ±é¡¹ç›®ç®¡ç†
- `public_participation` - å…¬ä¼—å‚ä¸è®°å½•
- `esg_reports` - ESG å½±å“åŠ›æŠ¥å‘Š

### äº‘å‡½æ•°

**æ–°å¢ 2 ä¸ªäº‘å‡½æ•°**:

- `restaurant-order-sync` - é¤å…è®¢å•åŒæ­¥åˆ°èŠ±å›­
- `restaurant-recommend` - æ°”å€™é¤å…æ™ºèƒ½æ¨è

### æ ¸å¿ƒåŠŸèƒ½

1. **æ°”å€™é¤å…è®¤è¯ä½“ç³»**

   - å››çº§è®¤è¯ (é“œç‰Œ/é“¶ç‰Œ/é‡‘ç‰Œ/é’»çŸ³)
   - ä½ç¢³èœå“å æ¯”è¯„ä¼°
   - å¹´åº¦ç¢³å‡æ’æ‰¿è¯ºè¿½è¸ª

2. **ä½ç¢³èœå“ç¢³æ ‡è¯†**

   - ä¸‰ç§æ ‡è¯†æ–¹å¼ (çº¢ç»¿ç¯/ç¢³è¯„åˆ†/ç¢³æ•°å€¼)
   - å®Œæ•´ç¢³è¶³è¿¹è®¡ç®—
   - ä¸è‚‰ç±»å¯¹æ¯”æ•°æ®

3. **é¤å…è®¢å•è‡ªåŠ¨åŒæ­¥**

   - è®¢å• â†’ meals è®°å½•
   - ç¢³å‡æ’è®¡ç®—
   - ç¢³ç§¯åˆ†è‡ªåŠ¨å‘æ”¾
   - å…¬ä¼—å‚ä¸è®°å½•

4. **ç¢³ç§¯åˆ†ç»Ÿä¸€è´¦æˆ·**

   - èŠ±å›­ + å•†åŸ + é¤å…ä¸‰æºåˆä¸€
   - ç­‰çº§ä½“ç³» (æ–°æ‰‹ â†’ å† å†›)
   - é‡Œç¨‹ç¢‘å¥–åŠ±æœºåˆ¶

5. **æ”¿åºœç¢³æ™®æƒ å¯¹æ¥**
   - æ”¿åºœé¡¹ç›®ç®¡ç†
   - ç”¨æˆ·æ¿€åŠ±æœºåˆ¶
   - é¤å…è¡¥è´´æœºåˆ¶
   - ç¢³äº¤æ˜“æ‰€æ•°æ®ä¸ŠæŠ¥

### ç¤ºä¾‹æ•°æ®

**å¯¼å…¥ 12 æ¡æµ‹è¯•æ•°æ®**:

- 3 å®¶æ°”å€™é¤å… (ä¸åŒè®¤è¯ç­‰çº§)
- 3 ä¸ªä½ç¢³èœå“ (å®Œæ•´ç¢³æ•°æ®)
- 3 ä¸ªç¢³å‡æ’é‡Œç¨‹ç¢‘
- 1 ä¸ªæ”¿åºœé¡¹ç›® (æ­å·ç¢³æ™®æƒ )
- 1 æ¡é¤å…è®¢å•
- 1 ä¸ªç¢³ç§¯åˆ†è´¦æˆ·

---

## Changed (å˜æ›´)

### æ•°æ®åº“

**æ‰©å±• 4 ä¸ªç°æœ‰é›†åˆ**:

1. **users** - æ–°å¢å­—æ®µ

   - `restaurant` - é¤å…åå¥½ä¸å†å²
   - `carbonProfile` - ç¢³å‡æ’ç”»åƒ
   - `publicParticipation` - å…¬ä¼—å‚ä¸æ•°æ®

2. **daily_stats** - æ–°å¢å­—æ®µ

   - `restaurant` - é¤å…å°±é¤ç»Ÿè®¡
   - `carbonCredits` - æ¯æ—¥ç¢³ç§¯åˆ†å˜åŠ¨

3. **data_dashboard** - æ–°å¢å­—æ®µ

   - `restaurantMetrics` - é¤å…ä¸šåŠ¡æŒ‡æ ‡
   - `carbonInclusiveMetrics` - ç¢³æ™®æƒ æŒ‡æ ‡
   - `governmentMetrics` - æ”¿åºœé¡¹ç›®æŒ‡æ ‡

4. **practitioners** - æ–°å¢å­—æ®µ
   - `restaurantEndorsements` - é¤å…æ¨èæ•°æ®

### äº‘å‡½æ•°

**æ›´æ–° database äº‘å‡½æ•°**:

- æ–°å¢ `init-v4` action
- æ–°å¢ `migrate-v4` action
- æ–°å¢ `seed-v4-data` action
- æ›´æ–° `get-status` æ”¯æŒ v4.0 æ£€æµ‹

### ä¸šåŠ¡æ¨¡å¼

**æ”¶å…¥æ¨¡å¼å‡çº§**:

- v3.0: B2C ç”µå•†ä¸ºä¸»
- v4.0: B2C + B2B + G2B å¤šå…ƒåŒ–

**æœåŠ¡å¯¹è±¡æ‰©å±•**:

- v3.0: C ç«¯ä¸ªäººç”¨æˆ·
- v4.0: C ç«¯ + B ç«¯é¤å… + G ç«¯æ”¿åºœ

---

## Technical Details (æŠ€æœ¯ç»†èŠ‚)

### ç´¢å¼•ç­–ç•¥

**æ–°å¢çº¦ 56 ä¸ªç´¢å¼•**:

- P0 å”¯ä¸€ç´¢å¼•: 15 ä¸ª
- P1 å¸¸ç”¨ç´¢å¼•: 39 ä¸ª
- P2 ä¼˜åŒ–ç´¢å¼•: 2 ä¸ª

**ç´¢å¼•æ€»æ•°**: 93 ä¸ª (v3.0:37 + v4.0:56)

### æ€§èƒ½ä¼˜åŒ–

- åœ°ç†ä½ç½®æŸ¥è¯¢ (2dsphere ç´¢å¼•)
- å¤åˆç´¢å¼•ä¼˜åŒ–é«˜é¢‘æŸ¥è¯¢
- ç¢³æ ‡ç­¾å’ŒèŠ‚æ°”æŸ¥è¯¢ä¼˜åŒ–

### æ•°æ®å®‰å…¨

- é¤å…è´¢åŠ¡æ•°æ®åŠ å¯†
- æ”¿åºœé¡¹ç›®æ•°æ®æƒé™æ§åˆ¶
- ç¢³äº¤æ˜“è®°å½•å®¡è®¡æ—¥å¿—

---

## Migration Guide (è¿ç§»æŒ‡å—)

### ä» v3.0 å‡çº§åˆ° v4.0

**Step 1**: éƒ¨ç½²æ›´æ–°çš„ database äº‘å‡½æ•°

```bash
tcb fn deploy database --dir ./cloudfunctions/database -e my-garden-app-env-4e0h762923be2f --force
```

**Step 2**: åˆ›å»ºæ–°é›†åˆ

```bash
tcb fn invoke database -e my-garden-app-env-4e0h762923be2f --params '{"action":"init-v4"}'
```

**Step 3**: æ‰©å±•ç°æœ‰é›†åˆ

```bash
tcb fn invoke database -e my-garden-app-env-4e0h762923be2f --params '{"action":"migrate-v4"}'
```

**Step 4**: å¯¼å…¥ç¤ºä¾‹æ•°æ®

```bash
tcb fn invoke database -e my-garden-app-env-4e0h762923be2f --params '{"action":"seed-v4-data"}'
```

**Step 5**: é…ç½®ç´¢å¼•

- å‚è€ƒ: `Docs/æ•°æ®åº“ç´¢å¼•é…ç½®v4.0.md`

### å›æ»šæ–¹æ¡ˆ

å¦‚éœ€å›æ»šåˆ° v3.0:

```bash
# æ‰‹åŠ¨åˆ é™¤ v4.0 æ–°å»ºçš„ 15 ä¸ªé›†åˆ
# åœ¨äº‘å¼€å‘æ§åˆ¶å°åˆ é™¤ä»¥ä¸‹é›†åˆ:
# restaurants, restaurant_*, carbon_*, government_*, public_*, esg_*
```

---

## Breaking Changes (ç ´åæ€§å˜æ›´)

### æ— ç ´åæ€§å˜æ›´

v4.0 æ˜¯**å®Œå…¨å‘åå…¼å®¹**çš„:

- âœ… v3.0 æ‰€æœ‰åŠŸèƒ½ä¿æŒä¸å˜
- âœ… v3.0 æ‰€æœ‰æ•°æ®ä¿æŒä¸å˜
- âœ… v3.0 æ‰€æœ‰ API ä¿æŒä¸å˜

v4.0 æ˜¯**çº¯å¢é‡å‡çº§**:

- âœ¨ æ–°å¢é¤å…ä¸šæ€
- âœ¨ æ–°å¢ç¢³æ™®æƒ åŠŸèƒ½
- âœ¨ æ–°å¢æ”¿åºœå¯¹æ¥èƒ½åŠ›

---

## Contributors (è´¡çŒ®è€…)

- MyGarden æŠ€æœ¯å›¢é˜Ÿ
- ä¹æ‚¦ç´ ä¾›ä¸šåŠ¡å›¢é˜Ÿ
- AI ç¼–ç åŠ©æ‰‹

---

## Documentation (æ–‡æ¡£)

**æ–°å¢æ–‡æ¡£** (7 ä»½):

1. æ•°æ®åº“æ¶æ„å‡çº§æ–¹æ¡ˆ v4.0-æ°”å€™é¤å…ç‰ˆ.md
2. æ•°æ®åº“ v4.0 å‡çº§-æ‰§è¡ŒæŒ‡å—.md
3. æ•°æ®åº“ç´¢å¼•é…ç½® v4.0.md
4. v4.0 ç¤ºä¾‹æ•°æ®è¯´æ˜.md
5. ğŸ‰ æ•°æ®åº“ v4.0 å‡çº§å®Œæˆ.md
6. ğŸŒ æ•°æ®åº“ v4.0 å‡çº§-å®Œå…¨å®ŒæˆæŠ¥å‘Š.md
7. README-æ•°æ®åº“ v4.0.md

**æ›´æ–°æ–‡æ¡£** (1 ä»½):

- æ•°æ®åº“æ¶æ„è®¾è®¡æ–‡æ¡£-å®Œæ•´ç‰ˆ.md

---

## Comparison (ç‰ˆæœ¬å¯¹æ¯”)

| ç‰¹æ€§   | v3.0     | v4.0            |
| ------ | -------- | --------------- |
| é›†åˆæ•° | 30       | 45 (+50%)       |
| åŸŸæ•°   | 8        | 11 (+38%)       |
| ä¸šæ€   | 2        | 4 (+100%)       |
| å¹´æ”¶å…¥ | Â¥320 ä¸‡  | Â¥720 ä¸‡ (+125%) |
| å£å’   | 3-5 å¹´   | 5-10 å¹´         |
| å®šä½   | ç”Ÿæ€é—­ç¯ | ç¤¾ä¼šå¹³å°        |

---

## Roadmap (è·¯çº¿å›¾)

### Q4 2025

- [x] v4.0 æŠ€æœ¯å¼€å‘ âœ…
- [ ] ç´¢å¼•é…ç½®
- [ ] åŠŸèƒ½æµ‹è¯•
- [ ] è¯•ç‚¹é¤å…æ‹›å‹Ÿ

### Q1 2026

- [ ] 20-50 å®¶é¤å…ä¸Šçº¿
- [ ] æ”¿åºœé¡¹ç›®å¯¹æ¥
- [ ] ç”¨æˆ·çªç ´ 5,000

### Q2 2026

- [ ] æ‰©å±•è‡³ 100 å®¶é¤å…
- [ ] ç”¨æˆ·çªç ´ 20,000
- [ ] é¦–ä»½ ESG æŠ¥å‘Š

### Q3-Q4 2026

- [ ] å¤šåŸå¸‚æ‰©å±•
- [ ] é¤å…çªç ´ 500 å®¶
- [ ] ç”¨æˆ·çªç ´ 100,000
- [ ] å¹´æ”¶å…¥ Â¥720 ä¸‡

---

## ğŸŒ± ç»“æŸè¯­

> **v4.0, ä¸åªæ˜¯ç‰ˆæœ¬å·çš„å‡çº§**  
> **æ›´æ˜¯æˆ˜ç•¥çš„å‡ç»´, ä½¿å‘½çš„å‡å**
>
> **ä»"åšç”Ÿæ„"åˆ°"åšäº‹ä¸š"**  
> **ä»"è¿½æ±‚åˆ©æ¶¦"åˆ°"åˆ›é€ ä»·å€¼"**  
> **ä»"æœåŠ¡ç”¨æˆ·"åˆ°"æ¨åŠ¨ç¤¾ä¼šå˜é©"**
>
> **Let's Change the World!** ğŸŒ

---

**å‘å¸ƒæ—¥æœŸ**: 2025-10-15  
**ç‰ˆæœ¬**: 4.0.0  
**ä»£å·**: Climate Restaurant (æ°”å€™é¤å…)  
**çŠ¶æ€**: Released âœ…
