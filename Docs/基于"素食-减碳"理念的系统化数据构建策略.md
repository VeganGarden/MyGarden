# 基于"素食-减碳"理念的系统化数据构建策略

> **基于"素食-减碳"理念的系统化数据构建策略**
>
> **编制日期**：2025-10-14  
> **版本**：v1.0  
> **状态**：规划中

---

## 📋 目录

1. [项目背景与已完成工作](#1-项目背景与已完成工作)
2. [国际研究与最佳实践](#2-国际研究与最佳实践)
3. [六阶段数据构建规划](#3-六阶段数据构建规划)
4. [实施时间线](#4-实施时间线)
5. [可验证成果矩阵](#5-可验证成果矩阵)
6. [关键建议与风险控制](#6-关键建议与风险控制)

---

## 1. 项目背景与已完成工作

### 1.1 项目核心理念

**定位**：以纯净素食为切入点，打造"健康、低碳、文明"的社会新风尚与可持续发展场景。

**核心价值主张**：

- 🌱 **健康生活**：通过素食记录量化健康收益
- 🌍 **环保减碳**：可视化个人碳减排贡献
- 🎮 **游戏化体验**：虚拟花园和积分系统
- 🤝 **社交激励**：社区排行榜和互动分享
- 💼 **商业闭环**：积分兑换和 ESG 数据支持

**目标用户画像**：

| 用户类型       | 核心特征               | 主要需求                 | 典型行为                   |
| -------------- | ---------------------- | ------------------------ | -------------------------- |
| 健康生活践行者 | 注重饮食健康、环境友好 | 追踪碳足迹、健康饮食建议 | 每日记录饮食、查看减排趋势 |
| 环保主义者     | 强烈环保意识、数据驱动 | 可视化碳减排贡献         | 使用虚拟花园、参与公益挑战 |
| 游戏化用户     | 喜爱虚拟成长和成就     | 解锁植物、提升等级       | 连续签到、参与合种挑战     |
| 社交分享型     | 影响他人、参与社群     | 排行榜竞赛、好友互动     | 邀请好友、点赞花园         |
| 企业与组织     | ESG 和可持续发展       | 团体数据统计、减排证明   | 团体注册、下载碳减排报告   |

### 1.2 已完成工作盘点

#### ✅ 技术基础设施（v0.3.0）

**数据库架构**：

- 13 个核心集合（users, gardens, ingredients, meals, meat_products, recipes 等）
- 32 个性能优化索引
- 适配 10 万用户规模
- MongoDB 文档型数据库，支持灵活扩展

**云函数体系**：

- `login` - 用户登录认证
- `user` - 用户信息管理
- `garden` - 虚拟花园管理
- `carbon` - 碳足迹计算（含素食 vs 肉食对比）
- `database` - 数据库初始化
- `data-import` - 素食食材数据导入
- `meat-data-import` - 肉类碳足迹数据导入
- `recipe-data-import` - 食谱数据导入与管理

**素食食材数据库**：

- ✅ 190 种常见素食食材
- ✅ 9 大分类（蔬菜、豆制品、水果、谷物、坚果等）
- ✅ 完整营养成分（热量、蛋白质、碳水、脂肪）
- ✅ 碳足迹数据（kg CO₂e/kg）
- ✅ 数据来源：《中国食物成分表》+ 国际碳足迹研究

**肉类碳足迹数据库** 🆕：

- ✅ 81 种肉类产品（红肉 20+、禽肉 12+、水产 27+、加工肉 15+、乳制品 7）
- ✅ 4 大分类（红肉、禽肉、海鲜、加工肉）
- ✅ 碳足迹范围：2.9-64.2 kg CO₂e/kg
- ✅ 数据来源：FAO、Our World in Data（Poore & Nemecek 2018）、IPCC
- ✅ 支持素食替代品推荐

**食谱库** 🆕：

- ✅ 50 道精选素食食谱
- ✅ 6 大分类（中式经典10道、快手简餐8道、高蛋白8道、节气8道、西式8道、亚洲融合8道）
- ✅ 覆盖 20 种菜系（中餐18道、意式4道、日式2道等）
- ✅ 难度分布：简单26道、中等18道、困难6道
- ✅ 自动碳足迹计算（平均 0.63 kg CO₂e/份）
- ✅ 完整营养成分和烹饪步骤
- ✅ 素食 vs 肉食对比（平均减排 86.2%）
- ✅ 多维度搜索和智能推荐

**团队协作**：

- ✅ Git Flow 工作流程
- ✅ 完整文档体系
- ✅ 新人开发启动指南
- ✅ 协作者管理机制

### 1.3 当前数据缺口分析

| 数据类型     | 当前状态  | 需求缺口      | 影响程度 | 优先级 |
| ------------ | --------- | ------------- | -------- | ------ |
| 素食食材     | ✅ 190 种 | 扩展到 300+   | 🟡 中    | P2     |
| **肉类数据** | ✅ 81 种  | 持续更新      | 🟢 低    | P3     |
| **食谱库**   | ✅ 50 道  | 扩展到 100+   | 🟢 低    | P2     |
| **植物模板** | ⚠️ 基础   | 60 种完整数据 | 🔴 高    | **P1** |
| 场景系统     | ⚠️ 概念   | 5 个完整场景  | 🟡 中    | P2     |
| 成就系统     | ❌ 无     | 55 个成就     | 🟠 中高  | P1     |
| 排行榜       | ❌ 无     | 5 种排行榜    | 🟠 中高  | P2     |
| 第三方对接   | ❌ 无     | 平台映射数据  | 🟡 中    | P3     |
| 教育内容     | ❌ 无     | 50 篇文章     | 🟢 低    | P3     |

**优先级说明**：

- **P0**：核心功能必需，立即执行
- **P1**：重要功能，1-2 周内完成
- **P2**：增强功能，1 个月内完成
- **P3**：辅助功能，2-3 个月内完成

### 1.4 阶段一任务完成状态 🎯

| 任务编号 | 任务名称           | 状态      | 完成日期   | 成果              |
| -------- | ------------------ | --------- | ---------- | ----------------- |
| 1.1      | 肉类碳足迹数据库   | ✅ 已完成 | 2025-10-14 | 81 种肉类产品数据 |
| 1.2      | 食谱库构建         | ✅ 已完成 | 2025-10-14 | 50 道精选食谱     |
| 1.3      | 碳排放计算引擎优化 | ⏸️ 待开始 | -          | 多因子计算模型    |

**阶段一进度**：2/3 任务已完成（66.7%）

**任务1.2详细成果**：
- ✅ 首批导入：18 道食谱（2025-10-14 上午）
- ✅ 扩展完成：50 道食谱（2025-10-14 下午）
- ✅ 分类完整：6 大类各 8-10 道
- ✅ 菜系丰富：20 种菜系全覆盖
- ✅ 难度合理：简单 52%、中等 36%、困难 12%

**最新成果**（2025-10-14）：

- ✅ 完成肉类碳足迹数据库建设（任务 1.1）
- ✅ 完成食谱库首批数据导入（任务 1.2）
- ✅ 实现素食 vs 肉食对比功能
- ✅ 实现食谱智能推荐功能
- ✅ 数据库架构从 12 个集合扩展至 13 个
- ✅ 索引数量从 28 个优化至 32 个

---

## 2. 国际研究与最佳实践

### 2.1 碳足迹计算的科学基础

#### 权威数据源

| 数据库名称                | 机构           | 覆盖范围     | 可用性     | 官网               |
| ------------------------- | -------------- | ------------ | ---------- | ------------------ |
| **LCA Food Database**     | 瑞士生态中心   | 2000+食品    | 开放 API   | ecoinvent.org      |
| **USDA FoodData Central** | 美国农业部     | 8000+食品    | 免费 API   | fdc.nal.usda.gov   |
| **FAOSTAT**               | 联合国粮农组织 | 全球农业排放 | 开放数据   | fao.org/faostat    |
| **Our World in Data**     | 牛津大学       | 可视化碳足迹 | CC 授权    | ourworldindata.org |
| **Agribalyse**            | 法国农业部     | 2500+食品    | 开放数据   | agribalyse.fr      |
| **中国食物成分表**        | 北京大学       | 中国食品数据 | 标准版购买 | -                  |

#### 核心研究发现

**食物碳足迹对比**（数据来源：Poore & Nemecek, Science 2018）：

| 食物类型        | 碳足迹 (kg CO₂e/kg) | 相比豆腐的倍数 |
| --------------- | ------------------- | -------------- |
| 🥩 牛肉         | 60.0                | 50 倍          |
| 🐑 羊肉         | 24.5                | 20 倍          |
| 🐷 猪肉         | 7.2                 | 6 倍           |
| 🐔 鸡肉         | 6.1                 | 5 倍           |
| 🐟 鱼类（养殖） | 5.1                 | 4 倍           |
| 🥛 奶酪         | 9.8                 | 8 倍           |
| 🥚 鸡蛋         | 4.5                 | 3.8 倍         |
| 🥛 牛奶         | 1.9                 | 1.6 倍         |
| 🫘 豆腐          | **1.2**             | **基准**       |
| 🥬 蔬菜（平均） | **0.4**             | **0.3 倍**     |

**关键洞察**：

- ✅ 每顿纯素食餐相比肉食餐可减排 **2-5kg CO₂e**
- ✅ 每周 1 次"无肉日"年减排约 **250kg CO₂e**（相当于种 10 棵树）
- ✅ 全素食饮食年减排约 **1500kg CO₂e**（相当于少开车 5000 公里）

### 2.2 行为变化模型

#### Fogg 行为模型（Stanford Persuasive Tech Lab）

```
B = MAT
B (Behavior) = M (Motivation) × A (Ability) × T (Trigger)
```

**应用到"我的花园"项目**：

| 要素         | 传统环保 App     | 我的花园方案          | 优势       |
| ------------ | ---------------- | --------------------- | ---------- |
| **M (动机)** | 抽象的"减排数字" | 虚拟花园可视化成长    | 即时满足感 |
| **A (能力)** | 手动输入繁琐     | 扫码/AI 识别/自动导入 | 降低门槛   |
| **T (触发)** | 被动提醒         | 好友互动+排行榜竞争   | 社交压力   |

#### 游戏化设计（Gamification）

**八角行为分析法**（Yu-kai Chou）应用：

1. **史诗意义**：参与全球减排，拯救地球
2. **成就感**：解锁植物、达成成就
3. **创造力**：自定义花园布局
4. **拥有感**：培育属于自己的虚拟花园
5. **社交影响**：排行榜、好友互动
6. **稀缺性**：珍稀植物、限时场景
7. **未知性**：随机奖励、组合特效
8. **损失规避**：连续签到中断会可惜

### 2.3 类似产品研究

#### 国内外对标产品

| 产品         | 核心机制     | 用户规模 | 可借鉴点                     | 可超越点               |
| ------------ | ------------ | -------- | ---------------------------- | ---------------------- |
| **蚂蚁森林** | 步行种树     | 6 亿+    | 社交传播、公益兑现           | 切入点太宽，缺乏专业度 |
| **Keep**     | 运动打卡     | 3 亿+    | 数据可视化、课程体系         | 未关联环保             |
| **薄荷健康** | 卡路里记录   | 2 亿+    | 食物数据库、AI 识别          | 未计算碳足迹           |
| **Forest**   | 专注种树     | 1000 万+ | 简洁克制、时间管理           | 场景单一               |
| **我的花园** | **素食减碳** | -        | **垂直领域+科学数据+游戏化** | **首创素食碳足迹**     |

**差异化优势**：

1. 🎯 **垂直定位**：聚焦素食减碳，不是泛环保
2. 📊 **科学数据**：基于国际权威碳足迹研究
3. 🎮 **深度游戏化**：不只是数字，而是可成长的花园
4. 🤝 **社交裂变**：好友互动、合种挑战
5. 💼 **B 端价值**：ESG 报告支持企业需求

---

## 3. 六阶段数据构建规划

### 阶段 1：碳足迹对比数据库 🔴 P0

> **核心目标**：建立完整的"素食 vs 肉食"碳排放对比数据，实现精准的减排量计算

#### 任务 1.1：肉类碳足迹数据库

**数据结构设计**：

```javascript
// 集合：meat_products（新增）
{
  name: "牛肉（牛腩）",
  nameEn: "Beef Brisket",
  category: "red_meat",
  subcategory: "beef",
  carbonFootprint: 60.5,  // kg CO₂e/kg
  nutrition: {
    calories: 250,
    protein: 19.2,
    carbs: 0.0,
    fat: 19.5
  },
  productionMethod: "conventional",  // conventional/organic
  region: "china_average",
  sources: [
    "FAO 2021",
    "Our World in Data - Poore & Nemecek 2018"
  ],
  comparisonGroup: "beef",  // 用于对比素食替代品
  veganAlternatives: ["素牛肉", "豆腐", "蘑菇"],
  status: "active",
  createdAt: Date,
  updatedAt: Date
}
```

**数据清单**（预计 80 种）：

| 分类     | 数量 | 示例                                                 | 碳足迹范围 |
| -------- | ---- | ---------------------------------------------------- | ---------- |
| 红肉类   | 20   | 牛肉（里脊/牛腩/牛排）、羊肉、猪肉（五花/瘦肉/排骨） | 7-60 kg    |
| 禽肉类   | 12   | 鸡肉（鸡胸/鸡腿/全鸡）、鸭肉、鹅肉                   | 4-8 kg     |
| 水产类   | 25   | 鱼类（三文鱼/鲈鱼/鲤鱼）、虾、蟹、贝类               | 3-12 kg    |
| 加工肉类 | 15   | 香肠、腊肉、火腿、培根、肉松                         | 8-15 kg    |
| 乳制品   | 8    | 奶酪、黄油、奶油、炼乳                               | 2-12 kg    |

**可验证成果**：

1. **云函数测试**（完成标准）：

   ```javascript
   // 测试输入
   {
     "action": "compareCarbon",
     "veganMeal": ["豆腐", "青菜", "米饭"],
     "meatMeal": ["牛肉", "青菜", "米饭"]
   }

   // 预期输出
   {
     "veganCarbon": 0.8,
     "meatCarbon": 12.5,
     "reduction": 11.7,
     "equivalentTo": "种植0.5棵树一年的吸碳量"
   }
   ```

2. **前端对比页面**（UI 设计）：

   ```
   [素食餐] 0.8kg CO₂  vs  [肉食餐] 12.5kg CO₂

   今日减排：11.7kg CO₂
   相当于：
   🌳 种植 0.5 棵树一年
   🚗 少开车 50 公里
   💡 节约 100 度电
   ```

3. **数据导出**：Excel 格式的完整对比表，供教育推广使用

---

#### 任务 1.2：食谱库构建

**数据结构设计**：

```javascript
// 集合：recipes
{
  recipeId: "mapo_tofu_001",
  name: "麻婆豆腐",
  nameEn: "Mapo Tofu",
  category: "chinese_vegan",
  cuisine: "sichuan",
  difficulty: "medium",  // easy/medium/hard
  cookingTime: 25,  // 分钟
  servings: 2,  // 人份

  ingredients: [
    {
      ingredientId: "豆腐_id",
      name: "豆腐",
      amount: 200,
      unit: "g",
      carbon: 0.24  // 自动计算
    },
    {
      ingredientId: "辣椒_id",
      name: "小米椒",
      amount: 30,
      unit: "g",
      carbon: 0.02
    }
  ],

  totalNutrition: {
    calories: 180,
    protein: 16.5,
    carbs: 8.3,
    fat: 10.2
  },

  totalCarbon: 0.5,  // kg CO₂e（自动汇总）

  cookingMethod: "炒",
  cookingSteps: [
    "豆腐切块，开水焯烫",
    "热锅凉油，炒香辣椒和花椒",
    "加入豆腐，调味翻炒"
  ],

  tags: ["素食", "低碳", "川菜", "高蛋白"],

  carbonComparison: {
    meatVersion: "肉末豆腐",
    meatCarbon: 3.2,
    savingsPercent: 84.4
  },

  createdBy: "admin",
  verified: true,
  likes: 1250,
  collections: 890,

  createdAt: Date,
  updatedAt: Date
}
```

**食谱内容策略**（预计 120 道）：

| 类型             | 数量 | 特点           | 示例                         |
| ---------------- | ---- | -------------- | ---------------------------- |
| **中式经典素食** | 40   | 传统名菜素食化 | 素宫保鸡丁、素东坡肉、素烤鸭 |
| **快手简餐**     | 25   | 15 分钟内完成  | 凉拌菜、素炒面、豆浆配餐     |
| **高蛋白食谱**   | 20   | 针对运动人群   | 豆制品组合、坚果沙拉         |
| **节气食谱**     | 24   | 顺应 24 节气   | 立春春饼、冬至饺子           |
| **西式素食**     | 15   | 西餐本土化     | 意面、披萨、汤品             |
| **亚洲融合**     | 10   | 日韩东南亚     | 寿司、泰式咖喱、韩式拌饭     |

**可验证成果**：

1. **食谱推荐系统**：

   - 根据季节推荐应季食谱
   - 根据用户饮食习惯推荐
   - 根据冰箱食材智能配菜

2. **一键记录功能**：

   - 选择食谱 → 自动填充食材
   - 自动计算碳足迹
   - 生成营养报告

3. **社区贡献机制**：
   - 用户可上传自己的食谱
   - 经审核后加入食谱库
   - 贡献者获得积分奖励

---

#### 任务 1.3：碳排放计算引擎优化

**当前计算模型**：

```
碳排放 = Σ(食材碳系数 × 重量)
```

**升级为动态多因子模型**：

```
碳排放 = Σ(食材基础碳 × 烹饪系数 × 运输系数 × 季节系数 × 产地系数)
```

**详细计算逻辑**：

```javascript
class CarbonCalculator {
  // 主计算函数
  calculate(meal) {
    let totalCarbon = 0;

    meal.ingredients.forEach((ing) => {
      const ingredient = this.getIngredient(ing.id);
      let carbon = (ingredient.carbonFootprint * ing.amount) / 1000;

      // 因子1：烹饪方式系数
      carbon *= this.getCookingFactor(meal.cookingMethod);

      // 因子2：季节系数（反季蔬果+20%）
      if (this.isOffSeason(ingredient, meal.date)) {
        carbon *= 1.2;
      }

      // 因子3：运输距离系数
      carbon *= this.getTransportFactor(ingredient, meal.location);

      // 因子4：保存方式系数（冷冻+10%）
      if (ing.preservation === "frozen") {
        carbon *= 1.1;
      }

      totalCarbon += carbon;
    });

    return {
      total: totalCarbon,
      breakdown: this.getBreakdown(meal),
      comparisonToMeat: this.compareToMeat(totalCarbon),
    };
  }

  // 烹饪方式系数
  getCookingFactor(method) {
    const factors = {
      生食: 1.0, // 无需加热
      蒸: 1.05, // 低能耗
      煮: 1.08,
      炒: 1.15, // 中等能耗
      烤: 1.25, // 高能耗
      炸: 1.35, // 最高能耗
      焖: 1.2, // 长时间加热
    };
    return factors[method] || 1.0;
  }

  // 运输距离系数
  getTransportFactor(ingredient, userLocation) {
    // 本地食材（<100km）
    if (ingredient.origin === userLocation.province) {
      return 1.0;
    }
    // 国内运输（跨省）
    if (ingredient.origin === "domestic") {
      return 1.15;
    }
    // 国际运输（进口）
    if (ingredient.origin === "import") {
      return 1.35;
    }
    return 1.0;
  }
}
```

**可验证成果**：

1. **详细分解报告**：

   ```
   今日午餐碳足迹：1.2kg CO₂

   详细分解：
   - 食材本身：0.8kg (67%)
   - 烹饪能耗：0.2kg (17%)
   - 运输距离：0.15kg (13%)
   - 冷藏保存：0.05kg (3%)

   💡 小贴士：
   - 选择应季蔬菜可减少20%碳排放
   - 蒸煮比油炸节省30%能耗
   ```

2. **对比基准库**：

   ```javascript
   // 常见餐食碳足迹参考
   {
     "素食快餐": 0.5-1.0,
     "素食正餐": 1.0-2.0,
     "肉食快餐": 3.0-5.0,
     "肉食正餐": 5.0-10.0,
     "牛排大餐": 15.0-25.0
   }
   ```

3. **教育提示系统**：
   - 根据计算结果给出优化建议
   - 例："冬天吃西瓜碳排高 20%，因为反季运输"

---

### 阶段 2：植物成长与场景系统 🔴 P1

> **目标**：构建与碳减排量关联的虚拟花园成长体系

#### 任务 2.1：植物模板数据扩充

**完整植物数据结构**：

```javascript
// 集合：plant_templates（扩充）
{
  plantId: "cherry_blossom_001",
  name: "樱花树",
  nameEn: "Cherry Blossom",
  scientificName: "Prunus serrulata",

  // 解锁条件
  unlockRequirements: {
    userLevel: "gold",  // 黄金等级
    totalPoints: 10000,
    totalCarbon: 500,  // 累计减排500kg
    prerequisitePlants: ["桃树", "梅树"]  // 前置植物
  },

  // 成长阶段
  growthStages: [
    {
      stage: 1,
      name: "种子",
      duration: 7,  // 天
      requiredWater: 5,  // 浇水次数
      requiredCarbon: 10,  // 期间需减排10kg
      visual: "seed.png",
      description: "埋下希望的种子"
    },
    {
      stage: 2,
      name: "发芽",
      duration: 14,
      requiredWater: 10,
      requiredCarbon: 20,
      visual: "sprout.png",
      description: "破土而出，生命萌发"
    },
    {
      stage: 3,
      name: "幼苗",
      duration: 30,
      requiredWater: 20,
      requiredCarbon: 50,
      visual: "sapling.png",
      description: "茁壮成长"
    },
    {
      stage: 4,
      name: "开花",
      duration: 60,
      requiredWater: 40,
      requiredCarbon: 100,
      visual: "bloom.png",
      specialEffect: "sakura_petals",  // 花瓣雨特效
      description: "樱花盛开，美丽绽放",
      milestone: "解锁'樱花季'成就"
    }
  ],

  // 象征意义
  symbolism: {
    meaning: "生命短暂而美好，珍惜当下",
    story: "樱花每年只开7天，提醒我们珍惜每一次减排行动...",
    culturalSignificance: "日本国花，象征希望与新生"
  },

  // 互动特性
  interactions: {
    clickEffect: "花瓣飘落",
    waterEffect: "花朵摇曳",
    combos: [
      {
        with: "薰衣草",
        effect: "混合花瓣雨",
        message: "樱花与薰衣草交织，芬芳满园"
      }
    ]
  },

  // 游戏化属性
  rarity: "legendary",  // common/rare/epic/legendary
  carbonAbsorption: 0.05,  // 象征意义：每天吸收0.05kg
  pointsPerDay: 10,  // 每天产生积分

  // 社交分享
  shareTemplate: "我的樱花树开花了！这是我坚持素食{days}天的成果，累计减排{carbon}kg！",

  createdAt: Date,
  updatedAt: Date
}
```

**植物分级体系**（预计 60 种）：

**青铜级植物（15 种）**：

- 🌵 仙人掌系列（5 种）：象征"坚持"
- 🌿 多肉植物（10 种）：易养护，快速成就感

**白银级植物（20 种）**：

- 🌸 灌木花卉（10 种）：薰衣草、玫瑰、茉莉
- 🍃 常见绿植（10 种）：发财树、绿萝、富贵竹

**黄金级植物（15 种）**：

- 🌳 乔木树木（10 种）：樱花、银杏、枫树
- 🌺 名贵花卉（5 种）：牡丹、兰花、荷花

**钻石级植物（10 种）**：

- 🦋 珍稀物种（5 种）：蝴蝶兰、铁树、千岁兰
- ✨ 概念植物（5 种）：发光树、浮空花、时光藤

**植物故事示例**：

```
🌵 仙人掌："在最干旱的沙漠中扎根，象征微小但持续的坚持。
每次你记录一顿素食，就是为环保沙漠注入一滴水。"

🌿 薰衣草："随着碳减排面积扩展，薰衣草花海蔓延，吸引更多人点赞。
当好友为你的花园点赞，薰衣草会释放紫色光晕。"

🌸 樱花树："花期虽短，却美到极致。坚持100天解锁开花，
系统自动生成'坚持100天'纪念海报，可分享到朋友圈。"

🦋 蝴蝶兰："花瓣颜色随你影响的好友数量而变化：
1人=粉色、5人=紫色、10人=金色、50人=彩虹色"
```

**可验证成果**：

1. **植物图鉴页面**：

   - 展示 60 种植物的完整信息
   - 标注解锁条件和当前进度
   - 已解锁/未解锁状态区分

2. **成长动画系统**：

   - 种子 → 发芽 → 成长 → 开花的渐进动画
   - 浇水时的反馈动画
   - 特殊植物的特效（花瓣雨、发光等）

3. **植物组合特效**：
   - 特定植物组合触发隐藏动画
   - 发现组合获得额外积分

---

#### 任务 2.2：场景系统数据

**场景数据结构**：

```javascript
// 集合：garden_scenes
{
  sceneId: "rainforest_01",
  sceneName: "热带雨林",
  sceneNameEn: "Tropical Rainforest",

  // 解锁条件
  unlockCondition: {
    minCarbon: 500,  // 累计减排500kg
    requiredPlants: ["榕树", "棕榈", "兰花"],
    userLevel: "silver"
  },

  // 视觉元素
  visualElements: {
    background: "rainforest_bg.jpg",
    foreground: "rainforest_fg.png",
    midground: "rainforest_mg.png",

    weather: [
      { type: "mist", opacity: 0.3, animation: "float" },
      { type: "rain", probability: 0.2, sound: "rain_ambient.mp3" }
    ],

    animals: [
      { type: "birds", count: 5, animation: "fly_random" },
      { type: "butterfly", count: 10, trigger: "user_click" },
      { type: "frog", sound: "frog_croak.mp3", probability: 0.1 }
    ],

    plants: {
      slots: 20,  // 可放置植物数量
      backgroundPlants: ["蕨类", "藤蔓", "苔藓"]
    }
  },

  // 交互特性
  interactiveFeatures: [
    {
      trigger: "dailyCarbon >= 5",  // 当日减排≥5kg
      effect: "waterfall_enhanced",  // 瀑布水流增强
      message: "你的减排行动让雨林更加生机勃勃！",
      duration: 24  // 小时
    },
    {
      trigger: "consecutiveDays >= 7",
      effect: "rainbow_appear",  // 出现彩虹
      message: "坚持7天，雨林为你升起彩虹！"
    }
  ],

  // 音效和音乐
  audio: {
    backgroundMusic: "rainforest_ambient.mp3",
    volume: 0.3,
    randomSounds: [
      { sound: "bird_chirp.mp3", probability: 0.1 },
      { sound: "water_drop.mp3", probability: 0.05 }
    ]
  },

  // 教育价值
  educationalContent: {
    title: "热带雨林 - 地球之肺",
    facts: [
      "热带雨林吸收全球30%的碳排放",
      "每分钟雨林面积减少相当于30个足球场",
      "你的素食选择，就是保护雨林的实际行动"
    ],
    quiz: {
      question: "热带雨林占地球陆地面积的多少？",
      options: ["5%", "10%", "6%", "15%"],
      answer: 2,
      explanation: "热带雨林仅占陆地6%，却承载了50%的生物多样性"
    }
  },

  // 场景解锁奖励
  unlockRewards: {
    points: 2000,
    badge: "雨林守护者",
    specialPlant: "兰花礼包"
  },

  createdAt: Date,
  updatedAt: Date
}
```

**5 大场景规划**：

| 场景            | 解锁条件    | 视觉特色          | 互动机制            | 教育主题   |
| --------------- | ----------- | ----------------- | ------------------- | ---------- |
| **1. 沙漠绿洲** | 初始场景    | 沙丘+仙人掌+绿洲  | 减排越多绿洲越大    | 水资源保护 |
| **2. 热带雨林** | 减排 500kg  | 雾气+鸟群+瀑布    | 减排触发瀑布增强    | 生物多样性 |
| **3. 滨海湿地** | 减排 1000kg | 芦苇+白鹭+潮汐    | 显示"保护 X 只白鹭" | 湿地生态   |
| **4. 温带森林** | 减排 2000kg | 四季变化+松鼠     | 季节同步真实天气    | 森林碳汇   |
| **5. 未来花园** | 减排 5000kg | 发光植物+悬浮步道 | 全球碳贡献地球仪    | 可持续未来 |

**可验证成果**：

1. **场景切换系统**：

   - 达到条件自动解锁新场景
   - 解锁动画+庆祝效果
   - 用户可自由切换已解锁场景

2. **动态环境效果**：

   - 场景元素根据减排量动态变化
   - 天气效果随机出现
   - 动物互动增加趣味性

3. **AR 融合功能**（未来）：
   - 虚拟花园投射到真实空间
   - 拍照分享到社交平台

---

### 阶段 3：激励与成就系统 🟠 P1

> **目标**：建立科学的积分-成就-激励体系，提升用户留存

#### 任务 3.1：成就系统数据库

**成就数据结构**：

```javascript
// 集合：achievements
{
  achievementId: "carbon_master_100",
  name: "减碳达人",
  nameEn: "Carbon Master",
  description: "累计减排100kg CO₂",
  icon: "badge_carbon_100.png",

  // 成就分类
  category: "milestone",  // milestone/consistency/social/diversity/special

  // 达成条件
  criteria: {
    type: "cumulative_carbon",  // 累计碳减排
    value: 100,
    unit: "kg",
    checkInterval: "realtime"  // 实时检查
  },

  // 奖励
  rewards: {
    points: 1000,
    unlockPlant: "银杏树",
    badge: {
      id: "carbon_master",
      displayName: "减碳达人",
      icon: "badge_gold.png",
      canDisplay: true  // 可在个人中心展示
    },
    waterDrops: 50,  // 浇水道具
    specialEffect: "golden_rain"  // 特殊特效
  },

  // 稀有度
  rarity: "epic",  // common/rare/epic/legendary
  completionRate: 0.12,  // 12%用户达成

  // 进阶系列
  series: "carbon_reduction",
  nextAchievement: "carbon_master_500",

  // 分享模板
  shareTemplate: {
    title: "🎉 我达成了'{name}'成就！",
    content: "累计减排{carbon}kg CO₂，相当于种了{trees}棵树！",
    image: "achievement_share_template.png"
  },

  // 教育价值
  educationalMessage: "100kg CO₂相当于：\n- 种植5棵树一年的吸碳量\n- 少开车500公里\n- 节约500度电",

  createdAt: Date,
  updatedAt: Date
}
```

**成就体系规划**（55 个成就）：

**1. 减排里程碑系列（15 个）**：

- 10kg："小小减碳家"
- 50kg："减碳践行者"
- 100kg："减碳达人"⭐
- 500kg："减碳大师"⭐
- 1000kg："减碳传奇"⭐⭐
- 5000kg："地球守护者"⭐⭐⭐

**2. 连续记录系列（10 个）**：

- 连续 7 天："素食一周"
- 连续 30 天："坚持一月"
- 连续 100 天："百日之约"⭐
- 连续 365 天："年度冠军"⭐⭐⭐

**3. 社交影响系列（8 个）**：

- 邀请 5 个好友："布道者"
- 好友合计减排 100kg："影响力先锋"
- 花园被点赞 100 次："人气之星"
- 帮助好友浇水 50 次："园丁助手"

**4. 多样化饮食系列（12 个）**：

- 尝试 50 种食材："美食探索家"
- 完成 10 种食谱："厨艺达人"
- 8 大菜系各吃一道："中华美食"
- 24 节气食谱全解锁："节气养生"

**5. 特殊时刻系列（10 个）**：

- 世界环境日记录："环保先锋"
- 春节期间全素食："素食过年"
- 首次分享减排报告："传播者"
- 参与合种挑战："团队协作"

**可验证成果**：

1. **成就墙页面**：

   - 展示所有成就（已达成/未达成）
   - 显示完成度百分比
   - 点击查看详细说明

2. **实时通知系统**：

   - 达成成就时推送通知
   - 动画庆祝效果
   - 自动发放奖励

3. **成就分享功能**：

   - 生成精美海报
   - 包含个人减排数据
   - 一键分享到朋友圈/微信群

4. **统计分析**：
   - 最难达成成就 TOP5
   - 用户平均成就数
   - 成就对留存率的影响

---

#### 任务 3.2：每日任务系统

**任务数据结构**：

```javascript
// 集合：daily_tasks
{
  taskId: "record_breakfast_20251014",
  templateId: "record_breakfast",  // 任务模板ID

  userId: "user_xxx",
  date: "2025-10-14",

  // 任务信息
  name: "记录早餐",
  description: "记录今天的素食早餐",
  type: "daily",  // daily/weekly/special

  // 完成条件
  criteria: {
    action: "record_meal",
    mealType: "breakfast",
    minIngredients: 3
  },

  // 奖励
  rewards: {
    points: 50,
    waterDrops: 3,
    randomReward: {
      probability: 0.1,  // 10%概率
      items: ["双倍积分卡", "加速肥料", "稀有种子"]
    }
  },

  // 状态
  status: "pending",  // pending/completed/expired
  completedAt: null,
  expiresAt: "2025-10-14 23:59:59",

  createdAt: Date,
  updatedAt: Date
}
```

**任务模板库**：

**每日任务（3 个，每天刷新）**：

| 任务名称 | 完成条件            | 奖励           | 难度 | 完成率 |
| -------- | ------------------- | -------------- | ---- | ------ |
| 记录早餐 | 记录早餐素食        | 50 积分+3 水滴 | 易   | 85%    |
| 浇水植物 | 给任意植物浇水 1 次 | 30 积分        | 易   | 90%    |
| 每日签到 | 打开小程序签到      | 20 积分        | 易   | 95%    |

**每周任务（5 个，每周一刷新）**：

| 任务名称      | 完成条件          | 奖励              | 难度 | 完成率 |
| ------------- | ----------------- | ----------------- | ---- | ------ |
| 尝试新食谱    | 完成 1 道新食谱   | 200 积分+稀有种子 | 中   | 60%    |
| 邀请好友      | 成功邀请 1 位好友 | 500 积分+特殊植物 | 中   | 45%    |
| 连续记录 7 天 | 本周每天都记录    | 300 积分+加速肥料 | 中   | 55%    |
| 减排 10kg     | 本周累计减排 10kg | 400 积分+场景道具 | 中   | 50%    |
| 分享成果      | 分享减排报告 1 次 | 150 积分          | 易   | 70%    |

**限时任务（节日/活动）**：

| 活动       | 时间         | 任务          | 奖励               |
| ---------- | ------------ | ------------- | ------------------ |
| 世界环境日 | 6 月 5 日    | 记录全天素食  | 1000 积分+专属徽章 |
| 素食周     | 每月第一周   | 连续 7 天素食 | 特殊植物+限定场景  |
| 春节挑战   | 春节期间     | 年夜饭全素食  | 稀有植物礼包       |
| 地球一小时 | 3 月最后周六 | 参与并记录    | 环保大使徽章       |

**可验证成果**：

1. **任务列表界面**：

   - 每日/每周任务分组展示
   - 实时更新完成进度
   - 未完成任务倒计时

2. **任务完成动画**：

   - 勾选完成时的庆祝效果
   - 奖励发放动画
   - 随机奖励的惊喜效果

3. **任务统计分析**：
   - 每周任务完成率报告
   - 最受欢迎任务 TOP5
   - 任务对用户活跃度的影响

---

### 阶段 4：社交互动数据 🟠 P2

> **目标**：构建社区排行和互动机制的数据支撑，提升社交裂变

#### 任务 4.1：排行榜系统

**排行榜数据结构**：

```javascript
// 集合：leaderboards
{
  leaderboardId: "weekly_carbon_2025_W42",
  type: "weekly_carbon",  // 排行榜类型
  period: "2025-W42",  // 时间周期
  startDate: "2025-10-13",
  endDate: "2025-10-19",

  // 排名数据
  rankings: [
    {
      rank: 1,
      userId: "user_001",
      userName: "素食小达人",
      avatar: "https://...",
      value: 45.2,  // kg CO₂
      trend: "up",  // up/down/new（相比上周）
      trendValue: 12.5,  // 上升12.5kg
      badges: ["减碳大师", "连续记录"],
      gardenPreview: "garden_thumbnail.jpg"
    },
    // ... 更多排名
  ],

  // 奖励设置
  rewards: {
    top1: {
      points: 1000,
      badge: "周冠军",
      specialPlant: "冠军之花",
      announcement: true  // 全服公告
    },
    top3: { points: 500, badge: "季军" },
    top10: { points: 200, badge: "十强" },
    top100: { points: 50 }
  },

  // 统计数据
  stats: {
    totalParticipants: 8523,
    averageCarbon: 8.5,
    topCarbon: 45.2,
    medianCarbon: 6.3
  },

  status: "active",  // active/archived

  createdAt: Date,
  updatedAt: Date
}
```

**5 种排行榜规划**：

**1. 周减排排行榜**：

- 更新频率：实时更新，每周一结算
- 参与条件：本周至少记录 3 次
- 奖励：TOP1 获 1000 积分+周冠军徽章
- 展示：显示 TOP100

**2. 月度减排排行榜**：

- 更新频率：每月 1 日结算
- 参与条件：上月至少记录 15 天
- 奖励：TOP1 获 5000 积分+月度王者称号
- 额外：生成月度减排证书

**3. 花园美学排行榜**：

- 评选机制：社区投票
- 评选标准：植物布局、色彩搭配、创意特效
- 周期：每两周一次
- 奖励：TOP3 花园展示在首页

**4. 影响力排行榜**：

- 计算公式：好友数量 × 带动好友减排总量
- 更新：每周更新
- 目标：鼓励用户邀请并影响他人
- 奖励：影响力勋章+推广大使称号

**5. 连续记录排行榜**：

- 指标：最长连续记录天数
- 展示：全服 TOP50
- 特殊奖励：365 天连续获"年度坚持王"

**可验证成果**：

1. **排行榜页面**：

   - 5 种榜单分 TAB 展示
   - 自己的排名高亮显示
   - 点击查看其他用户花园

2. **历史记录功能**：

   - 查看自己的历史排名
   - 排名趋势图表
   - 最佳记录展示

3. **奖励自动发放**：
   - 结算时自动发放奖励
   - 推送通知告知获奖
   - 奖励记录可查询

---

#### 任务 4.2：好友互动机制

**互动行为数据结构**：

```javascript
// 集合：friend_interactions
{
  interactionId: "water_gift_20251014_001",

  // 互动双方
  fromUser: {
    userId: "user_A",
    userName: "张三",
    avatar: "https://..."
  },
  toUser: {
    userId: "user_B",
    userName: "李四",
    avatar: "https://..."
  },

  // 互动类型
  actionType: "water_gift",  // water_gift/like/comment/gift

  // 具体内容
  content: {
    waterDrops: 5,  // 赠送5滴水
    message: "一起加油，坚持素食！",
    targetPlant: "李四的樱花树",
    plantId: "plant_12345"
  },

  // 状态
  status: "accepted",  // pending/accepted/rejected/expired
  acceptedAt: "2025-10-14 10:30:00",

  // 回馈机制
  gratitude: {
    sent: true,
    message: "谢谢你的水滴！我的樱花开得更美了！"
  },

  timestamp: "2025-10-14 09:15:00",

  createdAt: Date,
  updatedAt: Date
}
```

**互动类型设计**：

| 互动类型     | 功能说明             | 消耗       | 效果              | 限制              |
| ------------ | -------------------- | ---------- | ----------------- | ----------------- |
| **赠送水分** | 帮助好友植物快速成长 | 2 积分/滴  | 减少 1 天成长时间 | 每人每天 5 次     |
| **花园点赞** | 为好友花园点赞       | 免费       | 增加曝光度        | 每个花园每天 1 次 |
| **赠送花瓣** | 送给好友可兑换道具   | 10 积分/朵 | 好友获加速肥料    | 每人每周 10 次    |
| **留言互动** | 在好友花园留言       | 免费       | 增加互动性        | 每天 20 条        |
| **合种挑战** | 多人共同完成目标     | 免费       | 特殊奖励          | 无限制            |

**合种挑战机制**：

```javascript
// 集合：group_challenges
{
  challengeId: "earth_day_2025",
  name: "地球日合种挑战",
  description: "10人小组，7天内合计减排100kg",

  // 挑战设置
  groupSize: 10,
  duration: 7,  // 天
  targetCarbon: 100,  // kg

  // 参与者
  participants: [
    { userId: "user_A", contribution: 15.2, rank: 1 },
    { userId: "user_B", contribution: 12.8, rank: 2 },
    // ... 更多
  ],

  // 进度
  progress: {
    currentCarbon: 85.3,
    percentage: 85.3,
    remainingDays: 2
  },

  // 奖励
  rewards: {
    completion: {
      all: { points: 500, badge: "团队协作" },
      top3: { points: 300, specialPlant: "友谊之树" }
    },
    milestone: {
      "50%": { waterDrops: 10 },
      "100%": { points: 200 }
    }
  },

  status: "active",  // active/completed/failed

  createdAt: Date,
  completedAt: null
}
```

**可验证成果**：

1. **好友列表页面**：

   - 显示好友的减排排名
   - 好友花园快照
   - 互动按钮（送水/点赞）

2. **互动通知系统**：

   - 收到好友助力时推送
   - 互动记录可查看
   - 自动感谢机制

3. **合种挑战页面**：
   - 创建/加入挑战
   - 实时进度条
   - 团队贡献排行

---

### 阶段 5：第三方数据对接 🟡 P3

> **目标**：实现外卖/餐厅订单自动同步，降低用户记录门槛

#### 任务 5.1：平台映射数据库

**映射数据结构**：

```javascript
// 集合：platform_mappings
{
  mappingId: "meituan_dish_001",
  platform: "meituan",  // meituan/eleme/dianping

  // 平台菜品信息
  platformData: {
    dishId: "MT_123456",
    dishName: "宫保鸡丁（素）",
    restaurant: "素食餐厅",
    price: 28.0,
    category: "川菜"
  },

  // 映射到我们的食材
  mappedIngredients: [
    {
      ingredientId: "豆腐_id",
      ingredientName: "豆腐",
      estimatedAmount: 150,
      unit: "g",
      confidence: 0.9
    },
    {
      ingredientId: "花生_id",
      ingredientName: "花生",
      estimatedAmount: 30,
      unit: "g",
      confidence: 0.85
    },
    {
      ingredientId: "青椒_id",
      ingredientName: "青椒",
      estimatedAmount: 50,
      unit: "g",
      confidence: 0.8
    }
  ],

  // 计算结果
  estimatedCarbon: 0.8,
  estimatedNutrition: {
    calories: 220,
    protein: 15.5,
    carbs: 18.2,
    fat: 12.0
  },

  // 质量控制
  mappingQuality: {
    confidence: 0.85,  // 整体置信度
    verifiedByUsers: 23,  // 用户验证次数
    accuracy: 0.92,  // 准确率（用户反馈）
    lastVerified: "2025-10-13"
  },

  // 是否纯素
  isVegan: true,
  veganVerified: true,

  status: "active",

  createdAt: Date,
  updatedAt: Date
}
```

**对接平台规划**：

| 平台     | 数据类型 | 对接方式   | 预计映射数量 | 优先级 |
| -------- | -------- | ---------- | ------------ | ------ |
| 美团外卖 | 菜品名称 | API 对接   | 500+常见素菜 | P3-1   |
| 饿了么   | 订单记录 | OAuth 授权 | 自动导入     | P3-2   |
| 大众点评 | 素食餐厅 | 爬虫/API   | 1000+餐厅    | P3-3   |
| Keep     | 运动数据 | API 对接   | 碳抵消计算   | P3-4   |
| 薄荷健康 | 饮食记录 | 数据同步   | 食材映射     | P3-5   |

**可验证成果**：

1. **自动同步功能**：

   - 授权后自动导入外卖订单
   - 智能识别素食菜品
   - 90%+准确率

2. **手动修正界面**：

   - 用户可调整识别结果
   - 修正后的数据用于模型训练
   - 贡献修正获得积分奖励

3. **平台菜品库**：
   - 显示已映射的菜品数量
   - 用户可搜索平台菜品
   - 查看碳足迹估算

---

#### 任务 5.2：AI 图片识别数据集

**训练数据结构**：

```javascript
// 集合：dish_recognition_dataset
{
  imageId: "img_20251014_001",
  imageUrl: "https://cloud-storage.../dish_001.jpg",

  // 标注数据
  labels: {
    primary: "麻婆豆腐",
    confidence: 0.95,

    ingredients: [
      { name: "豆腐", visible: true, amount: 200 },
      { name: "辣椒", visible: true, amount: 30 },
      { name: "花椒", visible: true, amount: 10 }
    ],

    isVegan: true,
    cookingMethod: "炒",
    portion: "normal",  // small/normal/large

    carbonEstimate: 0.5,
    caloriesEstimate: 180
  },

  // 验证信息
  verification: {
    verified: true,
    verifiedBy: "user_123",
    verifiedAt: "2025-10-14",
    accuracy: "correct"  // correct/partial/wrong
  },

  // 数据来源
  source: "user_upload",  // user_upload/admin/api
  uploadedBy: "user_123",

  // 使用情况
  usageStats: {
    recognitionAttempts: 156,
    successRate: 0.89
  },

  status: "active",  // active/training/archived

  createdAt: Date,
  updatedAt: Date
}
```

**数据积累策略**：

**阶段 1：种子数据（前 1000 张）**：

- 管理员手工标注高质量图片
- 覆盖 100 道常见素食
- 每道菜 10 张不同角度/光线

**阶段 2：用户贡献（1000-10000 张）**：

- 用户上传图片 → AI 初步识别 → 用户验证 → 入库
- 验证准确的用户获 20 积分/张
- 建立用户贡献排行榜

**阶段 3：持续优化（10000+张）**：

- 定期重新训练模型
- 准确率目标：>90%
- 支持复杂场景（多道菜、混合餐）

**可验证成果**：

1. **拍照识别功能**：

   - 拍照 → 2 秒内返回识别结果
   - 显示食材列表和碳足迹
   - 用户可手动修正

2. **识别准确率统计**：

   - 整体准确率：当前 XX%
   - 各类菜品准确率分布
   - 识别失败案例分析

3. **用户贡献榜**：
   - 标注贡献 TOP50
   - 贡献者获专属徽章
   - 积分奖励排行

---

### 阶段 6：教育与科普内容 🟢 P3

> **目标**：建立系统的环保教育内容库，提升用户认知

#### 任务 6.1：知识库建设

**内容数据结构**：

```javascript
// 集合：educational_content
{
  contentId: "carbon_basics_001",
  title: "什么是碳足迹？",
  subtitle: "3分钟了解你每天的碳排放",

  category: "carbon_basics",  // carbon_basics/vegan_health/climate/lifestyle
  difficulty: "beginner",  // beginner/intermediate/advanced

  // 内容
  content: {
    summary: "碳足迹是指个人、组织或产品的温室气体排放总量...",
    sections: [
      {
        heading: "为什么要关心碳足迹？",
        text: "全球变暖主要由温室气体排放导致...",
        image: "global_warming.jpg",
        infographic: "carbon_cycle.svg"
      },
      {
        heading: "饮食的碳足迹",
        text: "食物生产占全球碳排放的26%...",
        chart: {
          type: "bar",
          data: ["牛肉:60", "猪肉:7", "鸡肉:6", "豆腐:1.2"]
        }
      }
    ],
    conclusion: "选择素食，是你能做的最有效的个人减排行动之一。"
  },

  // 元数据
  readTime: 3,  // 分钟
  wordCount: 800,

  // 互动元素
  quiz: {
    question: "生产1kg牛肉排放多少CO₂？",
    options: ["6kg", "20kg", "60kg", "100kg"],
    answer: 2,
    explanation: "生产1kg牛肉平均排放60kg CO₂，是豆腐的50倍！"
  },

  // 关联内容
  relatedTopics: ["温室效应", "气候变化", "素食与健康"],
  relatedRecipes: ["豆腐食谱列表"],

  // 统计数据
  stats: {
    views: 8900,
    likes: 1250,
    shares: 340,
    avgReadCompletion: 0.78  // 平均读完率78%
  },

  // 作者
  author: "MyGarden编辑部",
  reviewedBy: "环境科学专家",

  status: "published",  // draft/review/published/archived
  publishedAt: "2025-10-01",

  createdAt: Date,
  updatedAt: Date
}
```

**内容规划**（50 篇文章）：

| 类别           | 数量 | 主题示例                                     | 目标受众       |
| -------------- | ---- | -------------------------------------------- | -------------- |
| **碳足迹基础** | 10   | 什么是碳足迹、食物碳排放榜单、如何减少碳足迹 | 新用户         |
| **素食与健康** | 15   | 素食蛋白质来源、营养搭配、运动员素食案例     | 健康关注者     |
| **气候变化**   | 10   | 全球变暖影响、IPCC 报告解读、碳中和目标      | 环保关注者     |
| **可持续生活** | 15   | 零废弃生活、绿色出行、循环经济、极简主义     | 生活方式探索者 |

**可验证成果**：

1. **知识库页面**：

   - 分类浏览
   - 搜索功能
   - 推荐算法（根据阅读历史）

2. **每日一知**：

   - 首页每日推送一条小知识
   - 阅读完成获 5 积分
   - 分享获额外积分

3. **互动问答**：
   - 知识竞赛小游戏
   - 答对题目获积分
   - 排行榜展示

---

## 4. 实施时间线

### 4.1 总体规划（12 周完成）

```
时间轴：2025年10月 - 2026年1月

Week 1-2   ████████░░░░░░  阶段1核心（肉类数据+食谱库）
Week 3-4   ░░░░░░░░████░░  阶段2（植物+场景）
Week 5-6   ░░░░░░░░░░░░██  阶段3（激励系统）
Week 7-8   ░░░░░░░░░░░░░░  阶段4（社交功能）
Week 9-10  ░░░░░░░░░░░░░░  阶段5（第三方对接）
Week 11-12 ░░░░░░░░░░░░░░  阶段6（内容库）
```

### 4.2 详细时间表

#### 第 1-2 周：碳足迹对比数据库（P0）

**Week 1**：

- Day 1-2：搜集权威碳足迹数据源
- Day 3-5：整理 80 种肉类碳足迹数据
- Day 6-7：创建 data-import 云函数（肉类版本）

**Week 2**：

- Day 1-3：设计 50 道核心食谱数据
- Day 4-5：开发食谱导入和计算功能
- Day 6-7：前端对比页面开发+测试

**交付物**：

- ✅ 80 种肉类碳足迹数据
- ✅ 50 道素食食谱
- ✅ 对比计算云函数
- ✅ 前端对比页面

**验收标准**：

- [ ] 数据导入成功率>99%
- [ ] 对比计算准确度验证通过
- [ ] 前端页面 UI/UX 评审通过
- [ ] 10 位种子用户测试通过

---

#### 第 3-4 周：植物与场景系统（P1）

**Week 3**：

- Day 1-3：设计 60 种植物完整数据
- Day 4-5：植物成长算法开发
- Day 6-7：植物图鉴页面开发

**Week 4**：

- Day 1-3：5 个场景完整设计（视觉+互动）
- Day 4-5：场景切换逻辑开发
- Day 6-7：场景解锁动画+测试

**交付物**：

- ✅ 60 种植物模板数据
- ✅ 5 个完整场景
- ✅ 植物成长系统
- ✅ 场景切换功能

**验收标准**：

- [ ] 植物成长逻辑符合设计
- [ ] 场景解锁条件正确触发
- [ ] 动画效果流畅（60fps）
- [ ] 特殊组合效果验证

---

#### 第 5-6 周：激励系统（P1）

**Week 5**：

- Day 1-3：55 个成就数据设计
- Day 4-5：成就检测逻辑开发
- Day 6-7：成就墙页面+分享功能

**Week 6**：

- Day 1-3：每日/每周任务系统开发
- Day 4-5：任务刷新和奖励发放
- Day 6-7：全系统联调测试

**交付物**：

- ✅ 55 个成就数据
- ✅ 每日/每周任务系统
- ✅ 成就墙页面
- ✅ 任务列表功能

**验收标准**：

- [ ] 成就自动检测准确
- [ ] 奖励自动发放无误
- [ ] 任务刷新时间准确
- [ ] 用户完成率达预期

---

#### 第 7-8 周：社交功能（P2）

**Week 7**：

- Day 1-3：5 种排行榜数据+算法
- Day 4-5：排行榜页面开发
- Day 6-7：奖励结算系统

**Week 8**：

- Day 1-3：好友互动功能（送水/点赞）
- Day 4-5：合种挑战系统
- Day 6-7：社交功能整体测试

**交付物**：

- ✅ 5 种排行榜
- ✅ 好友互动功能
- ✅ 合种挑战系统

**验收标准**：

- [ ] 排行榜实时更新
- [ ] 互动通知及时推送
- [ ] 合种挑战逻辑正确
- [ ] 社交裂变率达标

---

#### 第 9-10 周：第三方对接（P3）

**Week 9**：

- Day 1-3：美团/饿了么 API 对接
- Day 4-5：500+菜品映射数据
- Day 6-7：自动同步功能测试

**Week 10**：

- Day 1-3：AI 识别模型调用
- Day 4-5：用户验证和反馈系统
- Day 6-7：识别准确率优化

**交付物**：

- ✅ 2 个平台对接
- ✅ 500+菜品映射
- ✅ AI 识别功能

**验收标准**：

- [ ] 订单同步成功率>95%
- [ ] 菜品识别准确率>85%
- [ ] 用户满意度>4.0/5.0

---

#### 第 11-12 周：内容库+整体优化（P3）

**Week 11**：

- Day 1-4：编写 30 篇核心科普文章
- Day 5-7：知识库页面+推荐系统

**Week 12**：

- Day 1-3：全系统性能优化
- Day 4-5：用户体验优化
- Day 6-7：发布前总体测试

**交付物**：

- ✅ 50 篇教育文章
- ✅ 知识库系统
- ✅ 性能优化报告

**验收标准**：

- [ ] 页面加载速度<2 秒
- [ ] 云函数响应<500ms
- [ ] 零崩溃率
- [ ] 用户满意度>4.5/5.0

---

## 5. 可验证成果矩阵

### 5.1 数据层面验证

| 阶段   | 数据资产 | 数量指标 | 质量指标        | 验证方式            |
| ------ | -------- | -------- | --------------- | ------------------- |
| 阶段 1 | 肉类数据 | 80 种    | 数据来源可追溯  | 专家审核+文献对比   |
| 阶段 1 | 食谱库   | 120 道   | 营养均衡+可操作 | 营养师审核+用户试做 |
| 阶段 2 | 植物模板 | 60 种    | 成长逻辑合理    | 游戏测试+用户反馈   |
| 阶段 2 | 场景数据 | 5 个     | 视觉+教育价值   | UI 设计师+教育专家  |
| 阶段 3 | 成就系统 | 55 个    | 达成率分布合理  | 数据分析+A/B 测试   |
| 阶段 4 | 排行榜   | 5 种     | 实时准确        | 压力测试+性能监控   |
| 阶段 5 | 平台映射 | 500+     | 准确率>90%      | 用户验证+机器学习   |
| 阶段 6 | 科普文章 | 50 篇    | 科学准确+易懂   | 专家审核+阅读完成率 |

### 5.2 功能层面验证

| 功能模块   | 前端页面        | 云函数接口           | 验收标准                |
| ---------- | --------------- | -------------------- | ----------------------- |
| 碳足迹对比 | 对比计算器页面  | `carbon.compare`     | 准确率 100%，响应<300ms |
| 食谱推荐   | 食谱列表+详情页 | `recipe.recommend`   | 推荐相关度>80%          |
| 植物图鉴   | 图鉴浏览页面    | `garden.getPlantLib` | 加载速度<1s             |
| 场景切换   | 花园主页        | `garden.unlockScene` | 切换流畅 60fps          |
| 成就墙     | 成就列表页面    | `achievement.check`  | 实时检测，延迟<1s       |
| 排行榜     | 排行榜页面      | `leaderboard.get`    | 每小时更新              |
| 好友互动   | 好友列表页面    | `friend.interact`    | 通知到达率>95%          |
| AI 识别    | 拍照上传页面    | `ai.recognizeDish`   | 准确率>85%，速度<3s     |
| 知识库     | 内容浏览页面    | `content.getArticle` | 阅读完成率>70%          |

### 5.3 用户层面验证

**关键指标（KPI）**：

| 指标             | 当前基准 | 阶段 1 目标 | 阶段 3 目标 | 最终目标  |
| ---------------- | -------- | ----------- | ----------- | --------- |
| **DAU**          | -        | 100         | 500         | 2000      |
| **次日留存率**   | -        | 40%         | 60%         | 70%       |
| **7 日留存率**   | -        | 20%         | 35%         | 50%       |
| **人均记录频次** | -        | 0.5 次/天   | 1 次/天     | 1.5 次/天 |
| **分享率**       | -        | 5%          | 10%         | 15%       |
| **邀请转化率**   | -        | 10%         | 20%         | 30%       |

**A/B 测试计划**：

| 测试项   | A 方案       | B 方案       | 测试指标   | 预期结果      |
| -------- | ------------ | ------------ | ---------- | ------------- |
| 成就奖励 | 高积分少道具 | 低积分多道具 | 任务完成率 | B 方案优 10%+ |
| 排行榜   | 周榜为主     | 日榜为主     | 用户活跃度 | A 方案优 15%+ |
| 植物成长 | 7 天周期     | 14 天周期    | 用户留存率 | 待验证        |

---

## 6. 关键建议与风险控制

### 6.1 关键成功因素（CSF）

#### 1. 数据质量优先于数量 ⭐⭐⭐

**原则**：

- ✅ 先做 100 道精品食谱，再扩展到 500 道
- ✅ 碳足迹数据必须有权威来源引用
- ✅ 每条数据都要经过验证

**实施**：

- 建立数据审核流程
- 标注数据来源和更新时间
- 定期复核和更新

#### 2. 快速迭代，小步快跑 ⭐⭐⭐

**原则**：

- ✅ 每 2 周发布一个可用的功能模块
- ✅ 根据用户反馈快速调整
- ✅ MVP 思维：最小可用产品先上线

**实施**：

- 采用敏捷开发方法
- 双周迭代会议
- 快速原型验证

#### 3. 科学性与趣味性结合 ⭐⭐

**原则**：

- ✅ 碳足迹计算要科学准确
- ✅ 植物成长要有游戏化乐趣
- ✅ 教育内容要深入浅出

**实施**：

- 邀请环境科学专家审核
- 游戏化设计专家参与
- 用户测试验证趣味性

#### 4. 构建数据飞轮 ⭐⭐⭐

**数据闭环**：

```
用户使用 → 产生数据 → 训练AI → 提升体验 → 吸引更多用户
   ↑                                                    ↓
   ←─────────────── 形成正循环 ────────────────────────←
```

**实施**：

- 用户贡献数据获积分奖励
- AI 模型持续优化
- 定期发布优化报告

### 6.2 风险识别与控制

#### 风险 1：数据准确性质疑 🔴

**风险描述**：

- 用户质疑碳足迹数据的科学性
- 不同数据源之间存在差异

**控制措施**：

- ✅ 所有数据标注权威来源
- ✅ 提供数据来源链接和说明
- ✅ 显示数据更新时间
- ✅ 允许用户反馈数据问题

**应急预案**：

- 建立专家顾问团队
- 定期发布数据校准报告
- 与权威机构合作背书

---

#### 风险 2：用户参与度不足 🟡

**风险描述**：

- 记录素食的门槛导致用户流失
- 游戏化不够吸引人

**控制措施**：

- ✅ 降低记录门槛（扫码/AI 识别）
- ✅ 强化即时反馈（动画/音效）
- ✅ 社交裂变机制
- ✅ 丰富奖励体系

**数据监控**：

- 每日监控留存率
- 记录完成率分析
- 用户流失节点分析

---

#### 风险 3：内容运营负担重 🟡

**风险描述**：

- 50 篇科普文章需持续更新
- 食谱库需要扩充维护

**控制措施**：

- ✅ UGC（用户生成内容）机制
- ✅ 社区管理员体系
- ✅ AI 辅助内容生成

**实施方案**：

- 用户上传食谱获积分
- 优质内容获官方推荐
- 建立内容审核流程

---

#### 风险 4：第三方接口不稳定 🟢

**风险描述**：

- 平台 API 变更导致功能失效
- 识别准确率下降

**控制措施**：

- ✅ 多平台备选方案
- ✅ 手动录入作为后备
- ✅ 降级策略设计

**降级方案**：

- API 失败 → 提示手动录入
- 识别失败 → 推荐相似菜品
- 保证核心功能可用

---

### 6.3 数据治理策略

#### 数据质量管理

**四层质量保障**：

1. **输入验证**（代码层）：

   - 数据类型检查
   - 范围合理性验证
   - 必填字段检查

2. **专家审核**（人工层）：

   - 营养师审核营养数据
   - 环境专家审核碳足迹
   - 美食专家审核食谱

3. **用户反馈**（众包层）：

   - 用户可报告数据问题
   - 积分奖励机制
   - 投票验证机制

4. **定期复核**（维护层）：
   - 每季度更新碳足迹数据
   - 每月更新食谱库
   - 年度大数据校准

#### 数据安全与隐私

**隐私保护措施**：

| 数据类型 | 敏感级别 | 保护措施     | 存储方式 |
| -------- | -------- | ------------ | -------- |
| OpenID   | 高       | SHA-256 哈希 | 加密存储 |
| 饮食记录 | 中       | 仅本人可见   | 隔离存储 |
| 减排统计 | 低       | 可选公开     | 脱敏展示 |
| 花园数据 | 低       | 默认公开     | 正常存储 |

**合规要求**：

- ✅ 符合《个人信息保护法》
- ✅ 用户可导出所有个人数据
- ✅ 用户可一键删除账号
- ✅ 明确的隐私政策和用户协议

---

## 7. 预期成果总览

### 7.1 数据资产构建

**12 周后的数据库规模**：

| 集合名称            | 预计记录数 | 数据价值         |
| ------------------- | ---------- | ---------------- |
| ingredients         | 270+       | 最全素食食材库   |
| meat_products       | 80+        | 肉类碳足迹对比库 |
| recipes             | 120+       | 精品素食食谱库   |
| plant_templates     | 60         | 完整植物成长体系 |
| garden_scenes       | 5          | 沉浸式场景系统   |
| achievements        | 55         | 多维度成就体系   |
| educational_content | 50         | 系统化科普内容   |
| platform_mappings   | 500+       | 第三方菜品映射   |

**数据总量**：约 1000+条高质量结构化数据

### 7.2 功能模块产出

**核心功能清单**：

✅ **碳足迹计算**：

- 素食 vs 肉食对比
- 多因子动态计算
- 详细分解报告

✅ **虚拟花园**：

- 60 种可培育植物
- 5 个主题场景
- 特效和互动

✅ **激励系统**：

- 55 个成就
- 每日/每周任务
- 积分和道具系统

✅ **社交功能**：

- 5 种排行榜
- 好友互动
- 合种挑战

✅ **便捷录入**：

- AI 图片识别
- 扫码导入
- 第三方同步

✅ **知识库**：

- 50 篇科普文章
- 互动问答
- 每日推送

### 7.3 商业价值产出

**用户价值**：

- 🎯 精准的碳减排数据
- 🎮 有趣的游戏化体验
- 🤝 活跃的社区氛围
- 📚 专业的环保教育

**商业价值**：

- 💰 积分商城基础数据
- 🏢 企业 ESG 报告支持
- 🤝 平台合作数据资产
- 📊 用户行为数据洞察

**社会价值**：

- 🌍 推广素食减碳理念
- 📈 实际碳减排量
- 🎓 提升公众环保意识
- 🌱 促进可持续生活方式

---

## 8. 立即行动方案

### 8.1 本周可执行任务（Week 1）

#### 任务清单

- [ ] **Day 1**：搜集权威碳足迹数据源，整理参考文献
- [ ] **Day 2**：设计肉类碳足迹数据结构，创建模板
- [ ] **Day 3-4**：录入 80 种肉类碳足迹数据
- [ ] **Day 5**：开发肉类数据导入云函数
- [ ] **Day 6**：测试数据导入功能
- [ ] **Day 7**：设计对比计算接口，编写测试用例

#### 具体操作

1. **创建云函数**：

   ```bash
   cd cloudfunctions
   mkdir meat-data-import
   # 参考data-import结构创建
   ```

2. **准备数据文件**：

   ```
   cloudfunctions/meat-data-import/meat-data.json
   - 80种肉类
   - 含碳足迹+营养+来源
   ```

3. **开发对比功能**：
   ```javascript
   // carbon云函数新增action
   case 'compareWithMeat':
     // 计算素食餐碳足迹
     // 计算等量肉食碳足迹
     // 返回对比结果
   ```

### 8.2 资源需求

**人力需求**：

| 角色       | 工作量      | 主要任务               |
| ---------- | ----------- | ---------------------- |
| 后端开发   | 全职，12 周 | 云函数开发、数据库设计 |
| 前端开发   | 全职，12 周 | 页面开发、交互实现     |
| 数据分析师 | 兼职，4 周  | 数据搜集、整理、验证   |
| UI 设计师  | 兼职，6 周  | 植物/场景视觉设计      |
| 内容编辑   | 兼职，4 周  | 科普文章撰写           |

**工具需求**：

- 设计工具：Figma/Sketch
- 数据工具：Excel/Python
- 测试工具：Postman/Jest
- 监控工具：云开发控制台

**预算估算**：

- 云服务费用：¥500-1000/月
- 第三方 API：¥1000-2000/月（AI 识别）
- 设计素材：¥3000-5000（一次性）

---

## 9. 总结与展望

### 9.1 核心亮点

🎯 **差异化定位**：

- 首个聚焦"素食减碳"的垂直应用
- 科学数据+游戏化+社交的完美结合
- B 端 C 端双轮驱动

📊 **数据资产**：

- 12 周构建 1000+条高质量数据
- 形成行业领先的素食碳足迹数据库
- 可复用、可扩展、可变现

🚀 **增长飞轮**：

- 内容吸引用户 → 用户产生数据 → 数据优化体验 → 体验带来增长

### 9.2 里程碑规划

**v0.3.0**（Week 2）：碳足迹对比系统

- 肉类数据+食谱库
- 对比计算功能

**v0.4.0**（Week 4）：完整花园系统

- 60 种植物+5 个场景
- 植物成长逻辑

**v0.5.0**（Week 6）：激励系统上线

- 成就墙+任务系统
- 积分道具完整

**v0.6.0**（Week 8）：社交功能完善

- 排行榜+好友互动
- 合种挑战

**v1.0.0**（Week 12）：正式版发布

- 全功能上线
- 开放公测

### 9.3 长期愿景（6 个月-1 年）

**数据规模**：

- 食材库：500+种
- 食谱库：1000+道
- 用户贡献图片：50000+张
- 科普文章：200+篇

**功能扩展**：

- AI 营养师：个性化饮食建议
- 碳交易：碳积分可交易/捐赠
- 企业服务：团体版+ESG 数据导出
- 线下活动：素食市集、环保沙龙

**商业模式**：

- 会员订阅：高级功能+无广告
- 积分商城：实物兑换分成
- B 端服务：企业 ESG 数据服务
- 内容付费：深度课程和报告

---

## 附录

### 附录 A：参考文献

1. Poore, J., & Nemecek, T. (2018). Reducing food's environmental impacts through producers and consumers. _Science_, 360(6392), 987-992.

2. IPCC (2019). Climate Change and Land: IPCC Special Report on Climate Change.

3. Willett, W., et al. (2019). Food in the Anthropocene: the EAT–Lancet Commission on healthy diets from sustainable food systems. _The Lancet_, 393(10170), 447-492.

4. 《中国食物成分表（标准版）》第 6 版，北京大学医学出版社

5. FAO (2021). Food and Agriculture Data. http://www.fao.org/faostat/

### 附录 B：数据模板

所有数据结构的详细 JSON Schema 请参考：

- `cloudfunctions/data-import/README.md`
- `Docs/数据库架构设计文档-简化版.md`

### 附录 C：联系方式

**技术问题**：技术负责人
**数据问题**：数据管理员
**产品建议**：产品经理
**合作咨询**：商务负责人

---

**文档维护**：本文档将根据项目进展持续更新

**下次更新**：完成阶段 1 后（预计 2 周后）

**版本历史**：

- v1.0 (2025-10-14)：初版发布

---

🌱 **让我们一起，用数据和技术，推动可持续发展！** 🌍
