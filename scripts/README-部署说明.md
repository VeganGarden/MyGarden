# äº‘å‡½æ•°éƒ¨ç½²è¯´æ˜

## âœ… å½“å‰çŠ¶æ€

æ‰€æœ‰ **20 ä¸ªäº‘å‡½æ•°** å·²é…ç½®å®Œæˆï¼Œå¯ä»¥å¼€å§‹éƒ¨ç½²ã€‚

## ğŸš€ éƒ¨ç½²æ­¥éª¤

### æ­¥éª¤ 1ï¼šå®‰è£…å’Œç™»å½•

```bash
# 1. å®‰è£…äº‘å¼€å‘CLIï¼ˆå¦‚æœæœªå®‰è£…ï¼‰
npm install -g @cloudbase/cli

# 2. ç™»å½•äº‘å¼€å‘
tcb login

# 3. éªŒè¯ç™»å½•çŠ¶æ€
tcb login:check
```

### æ­¥éª¤ 2ï¼šæ‰§è¡Œéƒ¨ç½²

**æ¨èæ–¹å¼**ï¼ˆä¸€é”®éƒ¨ç½²æ‰€æœ‰äº‘å‡½æ•°ï¼‰ï¼š

```bash
npm run deploy:functions
```

**æˆ–è€…ä½¿ç”¨è„šæœ¬**ï¼š

```bash
node scripts/deploy-all-functions.js
```

**æˆ–è€…é€ä¸ªéƒ¨ç½²**ï¼š

```bash
# éƒ¨ç½²æ ¸å¿ƒäº‘å‡½æ•°ï¼ˆå»ºè®®å…ˆéƒ¨ç½²è¿™äº›ï¼‰
tcb fn deploy login --force
tcb fn deploy user --force
tcb fn deploy tenant --force
tcb fn deploy database --force

# ç„¶åéƒ¨ç½²å…¶ä»–äº‘å‡½æ•°
tcb fn deploy carbon --force
tcb fn deploy recipe --force
# ... å…¶ä»–äº‘å‡½æ•°
```

### æ­¥éª¤ 3ï¼šéªŒè¯éƒ¨ç½²

1. **åœ¨æ§åˆ¶å°æ£€æŸ¥**ï¼š

   - ç™»å½• [è…¾è®¯äº‘å¼€å‘æ§åˆ¶å°](https://console.cloud.tencent.com/tcb)
   - è¿›å…¥"äº‘å‡½æ•°"é¡µé¢
   - ç¡®è®¤æ‰€æœ‰ 20 ä¸ªäº‘å‡½æ•°éƒ½å·²éƒ¨ç½²

2. **æµ‹è¯•å…³é”®äº‘å‡½æ•°**ï¼š
   - åœ¨æ§åˆ¶å°æµ‹è¯• `tenant` äº‘å‡½æ•°ï¼Œaction: `addXiaopingguo`
   - æ£€æŸ¥æ‰§è¡Œç»“æœå’Œæ—¥å¿—

## ğŸ“Š äº‘å‡½æ•°æ¸…å•

| åºå· | äº‘å‡½æ•°åç§°               | è¯´æ˜           | ä¼˜å…ˆçº§    |
| ---- | ------------------------ | -------------- | --------- |
| 1    | login                    | ç™»å½•è®¤è¯       | â­â­â­ é«˜ |
| 2    | user                     | ç”¨æˆ·ç®¡ç†       | â­â­â­ é«˜ |
| 3    | tenant                   | ç§Ÿæˆ·å’Œé¤å…ç®¡ç† | â­â­â­ é«˜ |
| 4    | database                 | æ•°æ®åº“ç®¡ç†     | â­â­â­ é«˜ |
| 5    | carbon                   | ç¢³è¶³è¿¹è®¡ç®—     | â­â­ ä¸­   |
| 6    | recipe                   | èœè°±ç®¡ç†       | â­â­ ä¸­   |
| 7    | ingredient               | é£Ÿæç®¡ç†       | â­â­ ä¸­   |
| 8    | garden                   | èŠ±å›­ç®¡ç†       | â­ ä½     |
| 9    | order-sync               | è®¢å•åŒæ­¥       | â­â­ ä¸­   |
| 10   | restaurant-order-sync    | é¤å…è®¢å•åŒæ­¥   | â­â­ ä¸­   |
| 11   | restaurant-recommend     | é¤å…æ¨è       | â­ ä½     |
| 12   | product-recommend        | äº§å“æ¨è       | â­ ä½     |
| 13   | data-import              | æ•°æ®å¯¼å…¥       | â­ ä½     |
| 14   | meat-data-import         | è‚‰ç±»æ•°æ®å¯¼å…¥   | â­ ä½     |
| 15   | recipe-data-import       | èœè°±æ•°æ®å¯¼å…¥   | â­ ä½     |
| 16   | practitioner-data-import | è·µè¡Œè€…æ•°æ®å¯¼å…¥ | â­ ä½     |
| 17   | product-data-import      | äº§å“æ•°æ®å¯¼å…¥   | â­ ä½     |
| 18   | practitioners            | è·µè¡Œè€…ç®¡ç†     | â­ ä½     |
| 19   | wisdom                   | æ™ºæ…§å†…å®¹       | â­ ä½     |
| 20   | plant-templates          | æ¤ç‰©æ¨¡æ¿       | â­ ä½     |

## ğŸ¯ æ¨èéƒ¨ç½²é¡ºåº

### ç¬¬ä¸€æ‰¹ï¼ˆæ ¸å¿ƒåŠŸèƒ½ - å¿…é¡»ï¼‰

1. login
2. user
3. tenant â­ **æ–°å¢ï¼Œé‡è¦**
4. database

### ç¬¬äºŒæ‰¹ï¼ˆä¸šåŠ¡åŠŸèƒ½ - é‡è¦ï¼‰

5. carbon
6. recipe
7. ingredient
8. order-sync
9. restaurant-order-sync

### ç¬¬ä¸‰æ‰¹ï¼ˆè¾…åŠ©åŠŸèƒ½ - å¯é€‰ï¼‰

10-20. å…¶ä»–äº‘å‡½æ•°

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **é¦–æ¬¡éƒ¨ç½²**ï¼šå»ºè®®å…ˆéƒ¨ç½²æ ¸å¿ƒäº‘å‡½æ•°ï¼ˆlogin, user, tenant, databaseï¼‰
2. **ä¾èµ–å®‰è£…**ï¼šæ¯ä¸ªäº‘å‡½æ•°éƒ¨ç½²å‰ä¼šè‡ªåŠ¨å®‰è£…ä¾èµ–
3. **éƒ¨ç½²æ—¶é—´**ï¼šå…¨éƒ¨éƒ¨ç½²å¯èƒ½éœ€è¦ 10-20 åˆ†é’Ÿ
4. **ç½‘ç»œè¦æ±‚**ï¼šç¡®ä¿ç½‘ç»œè¿æ¥ç¨³å®š
5. **æƒé™æ£€æŸ¥**ï¼šç¡®ä¿æœ‰äº‘å¼€å‘ç¯å¢ƒçš„éƒ¨ç½²æƒé™

## ğŸ” æ•…éšœæ’æŸ¥

### å¦‚æœéƒ¨ç½²å¤±è´¥

1. **æ£€æŸ¥ CLI ç‰ˆæœ¬**ï¼š

   ```bash
   tcb --version
   ```

2. **æ£€æŸ¥ç™»å½•çŠ¶æ€**ï¼š

   ```bash
   tcb login:check
   ```

3. **æ£€æŸ¥ç¯å¢ƒ ID**ï¼š

   - ç¡®è®¤ `cloudbaserc.json` ä¸­çš„ `envId` æ­£ç¡®
   - å½“å‰ç¯å¢ƒ ID: `my-garden-app-env-4e0h762923be2f`

4. **æŸ¥çœ‹è¯¦ç»†é”™è¯¯**ï¼š

   - åœ¨æ§åˆ¶å°æŸ¥çœ‹äº‘å‡½æ•°æ—¥å¿—
   - æ£€æŸ¥éƒ¨ç½²è¿‡ç¨‹ä¸­çš„é”™è¯¯ä¿¡æ¯

5. **æ‰‹åŠ¨éƒ¨ç½²å•ä¸ªäº‘å‡½æ•°**ï¼š
   ```bash
   cd cloudfunctions/tenant
   npm install --production
   cd ../..
   tcb fn deploy tenant --force
   ```

## ğŸ“ è·å–å¸®åŠ©

- äº‘å¼€å‘æ–‡æ¡£ï¼šhttps://cloud.tencent.com/document/product/876
- CLI æ–‡æ¡£ï¼šhttps://docs.cloudbase.net/cli-v1/intro.html
- é¡¹ç›®æ–‡æ¡£ï¼š`Docs/äº‘å‡½æ•°éƒ¨ç½²æŒ‡å—.md`

